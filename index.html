<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Nave a la Luna</title>
    <style>
      :root {
        --main-bg-color: #fff;
        --main-bg-btn-color: #000;
        --main-border-color: #000;
        --main-text-color: #fff;
        --main-bg-sec-color: #fff;
        --main-border-sec-color: #fff;
        --main-text-sec-color: #000;
      }

      [data-mode="dark"] {
        --main-bg-color: #000;
        --main-bg-btn-color: #fff;
        --main-border-color: #4c4a4a;
        --main-text-color: #000;
        --main-bg-sec-color: #000;
        --main-border-sec-color: #000;
        --main-text-sec-color: #fff;
      }

      @font-face {
        font-family: "slunssen-extended-regular";
        src: url("assets/fonts/Slussen-ExtendedRegular.woff2") format("woff2");
        font-weight: normal;
        font-style: normal;
      }

      @font-face {
        font-family: "slunssen-extended-medium";
        src: url("assets/fonts/Slussen-Extended-Medium.woff2") format("woff2");
        font-weight: 500; /* Medium */
        font-style: normal;
      }

      @font-face {
        font-family: "slunssen-extended-extended";
        src: url("assets/fonts/Slussen-SemiboldExtended.woff2") format("woff2");
        font-weight: 600; /* Semibold */
        font-style: normal;
      }

      /* Reset CSS básico */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: slunssen-extended-regular, sans-serif;
      }

      html,
      body {
        height: 100%;
        font-family: sans-serif;
      }

      img,
      picture,
      video,
      canvas,
      svg {
        display: block;
        max-width: 100%;
        height: auto;
      }

      button,
      input,
      textarea,
      select {
        font: inherit;
        border: none;
        background: none;
        outline: none;
      }

      ul,
      ol {
        list-style: none;
      }

      a {
        text-decoration: none;
        color: inherit;
      }

      body {
        margin: 0;
        background: var(--main-bg-sec-color);
        text-align: center;
      }
      canvas {
        display: block;
        margin: auto;
        background-color: var(--main-bg-sec-color);
        border: 1px solid var(--main-border-sec-color);
        width: 100%;
      }

      /* Espaciador para empujar el game-wrapper hacia abajo */
      .spacer {
        height: 1000px;
        width: 100%;
      }

      /* Wrapper con altura dinámica */
      .game-wrapper {
        width: 100%;
        max-width: 1600px;
        margin: auto;
        position: relative;
        /* Altura será establecida por JavaScript */
      }

      /* Logo centrado en el wrapper con posición fija */
      .game-logo {
        position: absolute;
        top: calc(
          (100% - 109px) / 2
        ); /* Posición fija centrada en el espacio disponible (excluyendo 109px del container) */
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: -1; /* Fondo, por debajo de todo */

        /* Tamaño responsivo basado en la proporción del wrapper */
        height: 30.75%; /* Equivale a la proporción 210/683 = 0.3075 de la altura del wrapper */
        width: auto; /* Mantiene proporción original del logo */
        max-width: 90%; /* Para que no se salga del contenedor horizontalmente */
        min-height: 150px; /* Mínimo para evitar que sea demasiado pequeño */
        max-height: 300px; /* Máximo para evitar que sea demasiado grande */
      }

      /* Container que maneja el efecto persiana */
      .game-container {
        position: absolute;
        bottom: 0; /* Alineado al fondo para que se pliegue hacia abajo */
        width: 100%;
        overflow: hidden;
        transition: height 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        background-color: var(--main-bg-color);
        border-radius: 8px;
        /* Altura será establecida por JavaScript */
      }

      /* Efecto persiana - se cierra hacia abajo manteniendo contenido fijo */
      /* Eliminamos la altura fija del CSS para que JavaScript tenga control completo */

      /* Canvas fijo en la parte inferior del paisaje */
      #gameCanvas {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        max-width: 100%; /* Se adapta si el contenedor es menor */
        display: block;
        transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        z-index: 1;
        margin-bottom: 105px;
      }

      /* Canvas cuando se minimiza */
      .game-container.minimized #gameCanvas {
        opacity: 0;
        z-index: 0;
      }

      /* Canvas cuando no está minimizado */
      .game-container:not(.minimized) #gameCanvas {
        opacity: 1;
        z-index: 1;
      }

      /* Button-overlay centrado respecto al canvas (considerando margen inferior 105px) */
      .button-overlay {
        position: absolute;
        left: 50%;
        top: calc(
          50% - 52.5px
        ); /* Ajuste para centrarse en la zona del canvas */
        transform: translate(-50%, -50%);
        z-index: 2; /* Encima del canvas */
        display: flex;
        gap: 0;
        transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      /* Button-overlay cuando se minimiza */
      .game-container.minimized .button-overlay {
        opacity: 0;
        z-index: 0;
        pointer-events: none; /* Evita interacciones cuando está oculto */
      }

      /* Button-overlay cuando no está minimizado */
      .game-container:not(.minimized) .button-overlay {
        opacity: 1;
        z-index: 2;
        pointer-events: auto;
      }

      /* Botón de cierre fijo */
      .btn-close {
        position: absolute;
        right: 2px;
        bottom: 2px;
        width: 195px;
        height: 105px;
        flex-shrink: 0; /* No se encoge */
        z-index: 3;
        cursor: pointer;
      }

      /* Caja del tiempo fija en esquina inferior izquierda */
      .time-box {
        position: absolute;
        left: 2px;
        bottom: 2px;
        width: 165px;
        height: 105px;
        background-color: var(--main-bg-btn-color);
        color: var(--main-text-color);
        border-radius: 8px;
        z-index: 3;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: slunssen-extended-regular, sans-serif;
        font-size: 12px;
        flex-shrink: 0; /* No se encoge */
        transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .time-box span {
        font-weight: 500;
        font-family: slunssen-extended-medium, sans-serif;
      }

      /* Time-box cuando se minimiza */
      .game-container.minimized .time-box {
        opacity: 0;
        z-index: 0;
        pointer-events: none; /* Evita interacciones cuando está oculto */
      }

      /* Time-box cuando no está minimizado */
      .game-container:not(.minimized) .time-box {
        opacity: 1;
        z-index: 3;
        pointer-events: auto;
      }

      /* Estilo específico para el display del tiempo */
      #timeDisplay {
        width: 64px; /* Ancho fijo para evitar movimiento */
        text-align: center;
      }

      /* Caja del boost junto al timeBox */
      .boost-box {
        position: absolute;
        left: 175px; /* Posicionado justo al lado del timeBox (165px + 10px margen) */
        bottom: 2px;
        height: 105px; /* Misma altura que time-box */
        background-color: #000; /* Fondo negro */
        color: white;
        border: 2px solid #4c4a4a; /* Borde color especificado */
        border-radius: 8px;
        z-index: 3;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: slunssen-extended-regular, sans-serif;
        font-size: 12px;
        padding: 0 12px;
        gap: 8px; /* Espacio entre ícono y texto */
        visibility: hidden; /* Oculto inicialmente */
        transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        width: 200px;
      }

      /* Ícono del boost */
      .boost-icon {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
      }

      /* Texto del boost */
      .boost-text {
        white-space: nowrap;
        font-weight: 500;
        font-family: slunssen-extended-medium, sans-serif;
      }

      /* Boost-box cuando se minimiza */
      .game-container.minimized .boost-box {
        opacity: 0;
        z-index: 0;
        pointer-events: none;
      }

      /* Boost-box cuando no está minimizado */
      .game-container:not(.minimized) .boost-box {
        opacity: 1;
        z-index: 3;
        pointer-events: auto;
      }

      /* Botón restart con los mismos estilos que time-box */
      .restart-btn {
        position: absolute;
        left: 2px;
        bottom: 2px;
        width: 165px;
        height: 105px;
        background-color: var(--main-bg-btn-color);
        color: var(--main-text-color);
        border-radius: 8px;
        z-index: 3;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: slunssen-extended-regular, sans-serif;
        font-size: 16px;
        flex-shrink: 0;
        transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        cursor: pointer;
        border: none;
        gap: 8px;
      }

      /* Restart-btn cuando se minimiza */
      .game-container.minimized .restart-btn {
        opacity: 0;
        z-index: 0;
        pointer-events: none;
      }

      /* Restart-btn cuando no está minimizado */
      .game-container:not(.minimized) .restart-btn {
        opacity: 1;
        z-index: 3;
        pointer-events: auto;
        width: 196px;
      }

      .restart-btn img {
        width: 24px;
        height: 24px;
      }

      .btn-init {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .btn-default {
        font-size: 12px;
        text-transform: uppercase;
        background-color: var(--main-bg-btn-color);
        color: var(--main-text-color);
        justify-content: center;
        align-items: center;
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        font-weight: 500;
        font-family: slunssen-extended-medium, sans-serif;
      }

      .button-overlay .btn-default {
        width: 254px;
        height: 46px;
      }

      .button-overlay .btn-default img {
        margin: 0 8px 0 0;
      }

      .controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 32px;
      }

      .controls-title {
        font-size: 24px;
        margin-bottom: 32px;
        color: var(--main-text-sec-color);
        font-family: slunssen-extended-extended, sans-serif;
        font-weight: 700;
      }

      .controls-col-1 {
        width: 100px;
      }

      .controls-col-2 {
        width: 308px;
        display: flex;
        justify-content: end;
      }

      .controls-small {
        width: 100px;
        height: 100px;
        border-radius: 8px;
        border: 1px solid var(--main-border-color);
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--main-text-sec-color);
        background-color: var(--main-bg-sec-color);
        margin-bottom: 8px;
      }

      .controls-small:last-child {
        margin-bottom: 0;
      }

      .controls-small-up,
      .controls-small-down,
      .controls-small-space {
        width: auto;
        height: 12px;
      }

      .controls-small-space {
        margin-bottom: 24px;
      }

      .controls-big {
        width: 300px;
        height: 100px;
        border-radius: 8px;
        border: 1px solid var(--main-border-color);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 12px;
        color: var(--main-text-sec-color);
        background-color: var(--main-bg-sec-color);
        flex-direction: column;
      }

      /* Estilos para el ícono close */
      .btn-close .close-icon {
        width: 24px;
        height: 24px;
        margin-right: 8px;
      }

      /* Estilos para el texto close */
      .btn-close .close-text {
        font-family: slunssen-extended-medium, sans-serif;
        font-size: 12px;
        font-weight: 500;
        white-space: nowrap;
        color: inherit;
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px; /* Para evitar que ocupe espacio en el layout */
        overflow: hidden;
        clip: rect(0, 0, 0, 0); /* Obsoleto pero buen fallback */
        white-space: nowrap; /* Evita que el texto se parta en varias líneas */
        border-width: 0; /* Asegura que no haya borde */
      }
    </style>
  </head>
  <body>
    <div class="spacer"></div>
    <div class="game-wrapper" data-mode="dark">
      <div class="game-container minimized" style="height: 109px">
        <canvas id="gameCanvas" width="1600" height="570"></canvas>
        <div class="button-overlay">
          <div class="btn-init">
            <p class="controls-title">CONTROLS</p>
            <div class="controls">
              <div class="controls-col-1">
                <div class="controls-small">
                  <img
                    class="controls-small-up"
                    aria-label="subir"
                    src="assets/arrow-up.svg"
                    alt="Subir"
                  />
                </div>
                <div class="controls-small">
                  <img
                    class="controls-small-down"
                    aria-label="bajar"
                    src="assets/arrow-down.svg"
                    alt="Bajar"
                  />
                </div>
              </div>
              <div class="controls-col-2">
                <div class="controls-big">
                  <img
                    class="controls-small-space"
                    aria-label="bajar"
                    src="assets/arrow-space.svg"
                    alt="Bajar"
                  />
                  <span class="" aria-label="acelerar"
                    >SPACE BAR TO ACCELERATE</span
                  >
                </div>
              </div>
            </div>
            <button class="btn-default" id="startBtn">
              <img
                class="controls-small-play"
                aria-label="Iniciar el juego"
                src="assets/play.png"
                alt="Iniciar el juego"
              />
              Play
            </button>
          </div>
        </div>
        <button class="btn-default btn-close" id="stopBtn">
          <img
            class="close-icon"
            src="assets/icon-close-small.svg"
            alt="Close"
          />
          <span class="close-text">CLOSE</span>
        </button>
        <div class="time-box" id="timeBox">
          <img
            class="controls-small-stop"
            aria-label="Cerrar juego"
            src="assets/icon-time.svg"
            alt="Cerrar juego"
          />
          <span id="timeDisplay">00:00 s</span>
        </div>
        <div class="boost-box" id="boostBox">
          <img class="boost-icon" src="assets/arrow-space.svg" alt="Boost" />
          <span class="boost-text">BOOST (SPACE)</span>
        </div>
        <button
          class="btn-default restart-btn"
          id="restartBtn"
          style="display: none"
        >
          <img
            class="controls-small-stop"
            aria-label="Jugar de nuevo"
            src="assets/icon-return.svg"
            alt="Jugar de nuevo"
          />
          PLAY AGAIN
        </button>
      </div>
      <img
        class="game-logo"
        src="assets/edg-logo-bk.svg"
        alt="Fondo Espacial"
        srcset=""
      />
    </div>
    <script src="game.js"></script>
  </body>
</html>
